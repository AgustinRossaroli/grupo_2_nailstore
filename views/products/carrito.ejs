<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/carrito.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <%- include('../partials/head.ejs') %>
        <title>Carrito De Compras</title>
</head>

<body>
    <%- include('../partials/header.ejs') %>
        <main>
            <%if (allProducts.length > 0) {%>
            <section class="elementos">
                <h2>ELEMENTOS EN TU CARRITO DE COMPRAS</h2>
                <% for (let i = 0; i < allProducts.length; i++) { %>
                <div class="producto">
                    <a href="/producto/<%=allProducts[i].id%>">
                    <img class="img" src="/images/<%=allProducts[i].image%>" alt="">
                    </a>
                    <div class="descripcion">
                        <div class="nombre"><%=allProducts[i].name%></div>
                        <div class="precio">$ <%=allProducts[i].price%></div>
                    </div>
                </div>
                <form class="borrar" action="/deleteProduct/<%=allProducts[i].id%>" method="post">
                    <button type="submit" class="button">
                        <p class="editText">BORRAR</p>
                    </button>
                </form>
                <% } %>
            </section>
            <section class="resumen">
                <h2>RESUMEN DE TU COMPRA</h2>
                <ul class="unorderList">
                    <% for (let i = 0; i < allProducts.length; i++) { %>
                    <li><%=allProducts[i].name%> <strong>$ <%=allProducts[i].price%></strong></li>
                    <% } %>
                </ul>
                <div class="divResumen">
                    <div class="total">
                        <p id="total">TOTAL</p>
                        <% let contador = 0; %>
                        <% for (let i = 0; i < allProducts.length; i++) { %>
                            <% contador += parseFloat(allProducts[i].price) %>
                        <% } %>
                        <p id="precioTotal">$ <%= contador %></p>
                    </div>
                    <div class="metodospago">IR A PAGAR AHORA</div>
                    <div class="irAPagar">
                        <div class="metodoPago"></div>
                        <div class="metodoPago"></div>
                        <div class="metodoPago"></div>
                    </div>
                </div>
            </section>
            <i id="flechita" class="fas fa-arrow-right"></i>
            <%} else { %>
            <div class="container">
                <h1>Â¡No hay nada en tu carrito de compras!</h1>
                <p>Debe agregar productos a su carrito para comprar.</p>
                <p>Visite la <a href="/shop">tienda</a> para ver nuestros productos.</p>
            </div>
            <% } %>    
        <script src="/formsValidations/carritoJs.js"></script>
        </main>
        <%- include('../partials/footer.ejs') %>
</body>

</html>